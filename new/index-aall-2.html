<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediCare Dashboard - Updated</title>

  <!-- Bootstrap + Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="index-aall-2.css">

</head>

<body>
  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="p-4">
      <div class="brand">
        <div class="logo"><i class="fas fa-hospital text-white"></i></div>
        <div>
          <h4>MediCare</h4>
          <small>Dashboard</small>
        </div>
      </div>

      <!-- Navigation -->
      <ul class="nav flex-column" id="mainNav">
        <li class="nav-item">
          <a class="nav-link active" href="#" data-section="dashboard"><i
              class="fas fa-tachometer-alt"></i><span>Dashboard</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="patients"><i class="fas fa-users"></i><span>Patients</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="appointments"><i
              class="fas fa-calendar-alt"></i><span>Appointments</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="doctors"><i class="fas fa-user-md"></i><span>Doctors</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="reports"><i class="fas fa-chart-bar"></i><span>Reports</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="billing"><i
              class="fas fa-file-invoice-dollar"></i><span>Billing</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="inventory"><i class="fas fa-boxes"></i><span>Inventory</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="settings"><i class="fas fa-cog"></i><span>Settings</span></a>
        </li>
      </ul>

      <!-- Profile / Footer -->
      <div class="mt-auto pt-4 border-top" style="border-color: rgba(255,255,255,0.06) !important;">
        <div class="d-flex align-items-center gap-3">
          <div class="custom-blue-medium rounded-circle p-2" style="background: rgba(255,255,255,0.08);"><i
              class="fas fa-user text-white"></i></div>
          <div>
            <div style="font-weight:700">Dr. Sarah Wilson</div>
            <small style="color: rgba(255,255,255,0.85)">Administrator</small>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <div class="main-content">
    <!-- TOP -->
    <header class="top-header d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <button id="sidebarToggle" class="btn btn-link d-md-none me-2" title="Toggle sidebar"><i class="fas fa-bars"
            style="color:var(--brand-1);"></i></button>
        <h2 class="page-title" id="pageTitle">Dashboard Overview</h2>
      </div>

      <div class="d-flex align-items-center">
        <div class="input-group me-3" style="width:320px;">
          <input class="form-control border-light" placeholder="Search patients, appointments...">
          <button class="btn btn-outline-secondary"><i class="fas fa-search"></i></button>
        </div>

        <div class="me-3">
          <button class="btn btn-link position-relative" data-bs-toggle="dropdown">
            <i class="fas fa-bell" style="color:var(--brand-1);font-size:18px"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#">New appointment request</a></li>
            <li><a class="dropdown-item" href="#">Lab results ready</a></li>
            <li><a class="dropdown-item" href="#">System maintenance scheduled</a></li>
          </ul>
        </div>

        <div class="d-flex align-items-center">
          <div class="pulse-dot bg-success rounded-circle me-2" style="width:10px;height:10px"></div>
          <span style="font-weight:600;color:var(--brand-2)">System Online</span>
        </div>
      </div>
    </header>

    <!-- CONTENT -->
    <div class="p-4" id="dashboardContent">
      <!-- Stats row -->
      <div class="row g-4 mb-4">
        <div class="col-xl-3 col-md-6">
          <div class="stat-card p-4 h-100">
            <div class="d-flex align-items-center">
              <div class="rounded-3 p-3 me-3" style="background:linear-gradient(135deg,#0F4D78,#49779C);color:#fff"><i
                  class="fas fa-users fs-4"></i></div>
              <div>
                <div class="counter" data-target="1247">0</div>
                <div style="color:var(--brand-2);font-weight:600">Total Patients</div>
                <small class="text-success"><i class="fas fa-arrow-up me-1"></i>12% from last
                  month</small>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-3 col-md-6">
          <div class="stat-card p-4 h-100">
            <div class="d-flex align-items-center">
              <div class="rounded-3 p-3 me-3" style="background:linear-gradient(135deg,#3b8fb6,#6fb3d4);color:#fff"><i
                  class="fas fa-calendar-check fs-4"></i></div>
              <div>
                <div class="counter" data-target="89">0</div>
                <div style="color:var(--brand-2);font-weight:600">Today's Appointments</div>
                <small class="text-info"><i class="fas fa-clock me-1"></i>Next at 2:30 PM</small>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-3 col-md-6">
          <div class="stat-card p-4 h-100">
            <div class="d-flex align-items-center">
              <div class="rounded-3 p-3 me-3" style="background:linear-gradient(135deg,#1FB98B,#1FA57B);color:#fff"><i
                  class="fas fa-dollar-sign fs-4"></i></div>
              <div>
                <div class="counter" data-target="45680">0</div>
                <div style="color:var(--brand-2);font-weight:600">Monthly Revenue</div>
                <small class="text-success"><i class="fas fa-arrow-up me-1"></i>8% increase</small>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-3 col-md-6">
          <div class="stat-card p-4 h-100">
            <div class="d-flex align-items-center">
              <div class="rounded-3 p-3 me-3" style="background:linear-gradient(135deg,#f7c948,#f4b400);color:#fff"><i
                  class="fas fa-user-md fs-4"></i></div>
              <div>
                <div class="counter" data-target="24">0</div>
                <div style="color:var(--brand-2);font-weight:600">Active Doctors</div>
                <small style="color:var(--brand-2)"><i class="fas fa-check-circle me-1"></i>All
                  available</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts row -->
      <div class="row g-4 mb-4">
        <div class="col-xl-8">
          <div class="chart-card p-4" style="height:320px">
            <h5 style="color:var(--brand-1);font-weight:700">Patient Visits Overview</h5>
            <canvas id="visitsChart" height="180"></canvas>
          </div>
        </div>
        <div class="col-xl-4">
          <div class="chart-card p-4" style="height:320px">
            <h5 style="color:var(--brand-1);font-weight:700">Department Distribution</h5>
            <canvas id="departmentChart" height="180"></canvas>
          </div>
        </div>
      </div>

      <!-- Quick actions / activity / status -->
      <div class="row g-4 mb-4">
        <div class="col-xl-4">
          <div class="chart-card p-4">
            <h5 style="color:var(--brand-1);font-weight:700">Quick Actions</h5>
            <div class="d-grid gap-3 mt-3">
              <button class="btn" style="background:var(--brand-1); color:#fff; border-radius:10px"
                onclick="showSection('patients')"><i class="fas fa-user-plus me-2"></i>Register New
                Patient</button>
              <button class="btn btn-outline-primary" onclick="showSection('appointments')"><i
                  class="fas fa-calendar-plus me-2"></i>Schedule Appointment</button>
              <button class="btn btn-outline-success"><i class="fas fa-file-medical me-2"></i> Create
                Medical Record</button>
              <button class="btn btn-outline-info"><i class="fas fa-pills me-2"></i>Manage
                Prescriptions</button>
            </div>
          </div>
        </div>

        <div class="col-xl-4">
          <div class="chart-card p-4">
            <h5 style="color:var(--brand-1);font-weight:700">Recent Activities</h5>
            <div class="timeline mt-3">
              <div class="timeline-item">
                <div style="font-weight:700;color:var(--brand-2)">New patient registered</div>
                <small style="color:var(--brand-2)">John Smith - 2 minutes ago</small>
              </div>
              <div class="timeline-item">
                <div style="font-weight:700;color:var(--brand-2)">Appointment completed</div>
                <small style="color:var(--brand-2)">Dr. Johnson with Sarah Davis - 15 minutes
                  ago</small>
              </div>
              <div class="timeline-item">
                <div style="font-weight:700;color:var(--brand-2)">Lab results uploaded</div>
                <small style="color:var(--brand-2)">Blood test for Mike Wilson - 1 hour ago</small>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-4">
          <div class="chart-card p-4">
            <h5 style="color:var(--brand-1);font-weight:700">System Status</h5>
            <div class="mt-3">
              <div class="d-flex justify-content-between mb-1">
                <span style="color:var(--brand-2)">Server Load</span><span
                  style="font-weight:700;color:var(--brand-1)">45%</span>
              </div>
              <div class="progress mb-3" style="height:10px;border-radius:8px;background:#e8f2f6">
                <div class="progress-bar" role="progressbar"
                  style="width:45%;background:linear-gradient(90deg,#0F4D78,#49779C)"></div>
              </div>

              <div class="d-flex justify-content-between mb-1">
                <span style="color:var(--brand-2)">Database Usage</span><span
                  style="font-weight:700;color:var(--brand-1)">67%</span>
              </div>
              <div class="progress mb-3" style="height:10px;border-radius:8px;background:#e8f2f6">
                <div class="progress-bar" role="progressbar"
                  style="width:67%;background:linear-gradient(90deg,#3b8fb6,#6fb3d4)"></div>
              </div>

              <div class="d-flex justify-content-between mb-1">
                <span style="color:var(--brand-2)">Storage</span><span
                  style="font-weight:700;color:var(--brand-1)">23%</span>
              </div>
              <div class="progress mb-2" style="height:10px;border-radius:8px;background:#e8f2f6">
                <div class="progress-bar" role="progressbar"
                  style="width:23%;background:linear-gradient(90deg,#1fb98b,#1fa57b)"></div>
              </div>

              <div class="mt-4 p-3 bg-light rounded d-flex justify-content-between align-items-center">
                <div>
                  <div style="font-weight:700;color:var(--brand-2)">Last Backup</div>
                  <small style="color:var(--brand-2)">Today at 3:00 AM</small>
                </div>
                <i class="fas fa-check-circle text-success fa-2x"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- recent patients table -->
      <div class="chart-card p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 style="color:var(--brand-1);font-weight:700">Recent Patients</h5>
          <button class="btn btn-outline-primary btn-sm" onclick="showSection('patients')">View All
            Patients</button>
        </div>

        <div class="table-responsive">
          <table class="table table-custom align-middle">
            <thead>
              <tr>
                <th>Patient ID</th>
                <th>Name</th>
                <th>Age</th>
                <th>Department</th>
                <th>Last Visit</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>PAT001</td>
                <td>John Smith</td>
                <td>45</td>
                <td>Cardiology</td>
                <td>2024-01-15</td>
                <td><span class="badge bg-success">Active</span></td>
                <td><button class="btn btn-sm btn-outline-primary me-1"><i class="fas fa-eye"></i></button><button
                    class="btn btn-sm btn-outline-secondary"><i class="fas fa-edit"></i></button>
                </td>
              </tr>
              <tr>
                <td>PAT002</td>
                <td>Sarah Johnson</td>
                <td>32</td>
                <td>Dermatology</td>
                <td>2024-01-14</td>
                <td><span class="badge bg-warning">Pending</span></td>
                <td><button class="btn btn-sm btn-outline-primary me-1"><i class="fas fa-eye"></i></button><button
                    class="btn btn-sm btn-outline-secondary"><i class="fas fa-edit"></i></button>
                </td>
              </tr>
              <tr>
                <td>PAT003</td>
                <td>Mike Davis</td>
                <td>28</td>
                <td>Orthopedics</td>
                <td>2024-01-13</td>
                <td><span class="badge bg-success">Active</span></td>
                <td><button class="btn btn-sm btn-outline-primary me-1"><i class="fas fa-eye"></i></button><button
                    class="btn btn-sm btn-outline-secondary"><i class="fas fa-edit"></i></button>
                </td>
              </tr>
              <tr>
                <td>PAT004</td>
                <td>Lisa Wilson</td>
                <td>55</td>
                <td>Neurology</td>
                <td>2024-01-12</td>
                <td><span class="badge bg-info">Follow-up</span></td>
                <td><button class="btn btn-sm btn-outline-primary me-1"><i class="fas fa-eye"></i></button><button
                    class="btn btn-sm btn-outline-secondary"><i class="fas fa-edit"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div> <!-- dashboardContent -->
  </div> <!-- main-content -->

  <!-- JS: Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Save initial dashboard HTML so we can restore later
    const dashboardContent = document.getElementById('dashboardContent');
    const initialDashboardHTML = dashboardContent.innerHTML;

    document.addEventListener('DOMContentLoaded', function () {
      // Sidebar show/hide on small screens
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebar = document.querySelector('.sidebar');
      if (sidebarToggle) {
        sidebarToggle.addEventListener('click', () => sidebar.classList.toggle('show'));
      }

      // nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
          const section = link.dataset.section;
          showSection(section);
          // close mobile sidebar after click
          if (window.innerWidth <= 900) sidebar.classList.remove('show');
        });
      });

      // counters
      const counters = document.querySelectorAll('.counter');
      counters.forEach(counter => {
        const target = parseInt(counter.dataset.target || 0, 10) || 0;
        let current = 0;
        const step = Math.max(1, Math.floor(target / 100));
        const tick = () => {
          current += step;
          if (current >= target) { counter.textContent = target.toLocaleString(); return; }
          counter.textContent = current.toLocaleString();
          requestAnimationFrame(tick);
        };
        requestAnimationFrame(tick);
      });

      // Initialize charts
      initializeCharts();
    });

    // Show section content (uses initial dashboard HTML for default)
    function showSection(section) {
      const pageTitle = document.getElementById('pageTitle');
      if (!section || section === 'dashboard') {
        pageTitle.textContent = 'Dashboard Overview';
        dashboardContent.innerHTML = initialDashboardHTML;
        initializeCharts(); // re-init charts (canvas elements re-inserted)
        return;
      }

      pageTitle.textContent = {
        'patients': 'Patient Management',
        'appointments': 'Appointment Management',
        'doctors': 'Doctor Management',
        'reports': 'Reports',
        'billing': 'Billing',
        'inventory': 'Inventory',
        'settings': 'Settings'
      }[section] || 'Dashboard';

      // For demo, we swap content simply. You can replace with your full pages or templates.
      if (section === 'patients') {
        dashboardContent.innerHTML = `
                    <div class="chart-card p-4">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5 style="color:var(--brand-1);font-weight:700">All Patients</h5>
                            <button class="btn" style="background:var(--brand-1);color:#fff;border-radius:10px"><i class="fas fa-user-plus me-2"></i>Add Patient</button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-custom">
                                <thead><tr><th>ID</th><th>Name</th><th>Dept</th><th>Last Visit</th><th>Status</th></tr></thead>
                                <tbody>
                                    <tr><td>PAT001</td><td>John Smith</td><td>Cardiology</td><td>2024-01-15</td><td><span class="badge bg-success">Active</span></td></tr>
                                    <tr><td>PAT002</td><td>Sarah Johnson</td><td>Dermatology</td><td>2024-01-14</td><td><span class="badge bg-warning">Pending</span></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
      } else if (section === 'appointments') {
        dashboardContent.innerHTML = `<div class="chart-card p-4"><h5 style="color:var(--brand-1);font-weight:700">Appointments</h5><p class="text-muted">Appointment management UI goes here.</p></div>`;
      } else if (section === 'doctors') {
        dashboardContent.innerHTML = `<div class="chart-card p-4"><h5 style="color:var(--brand-1);font-weight:700">Doctors</h5><p class="text-muted">Doctors list and schedules go here.</p></div>`;
      } else {
        dashboardContent.innerHTML = `<div class="chart-card p-4"><h5 style="color:var(--brand-1);font-weight:700">${pageTitle.textContent}</h5><p class="text-muted">Module content for ${pageTitle.textContent}.</p></div>`;
      }
    }

    // Chart initialization (safe to call multiple times)
    function initializeCharts() {
      // Destroy existing chart instances if any (avoid duplicates)
      if (window._visitsChart) { try { window._visitsChart.destroy(); } catch (e) { } window._visitsChart = null; }
      if (window._deptChart) { try { window._deptChart.destroy(); } catch (e) { } window._deptChart = null; }

      const visitsEl = document.getElementById('visitsChart');
      if (visitsEl && visitsEl.getContext) {
        const ctx = visitsEl.getContext('2d');
        window._visitsChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            datasets: [{
              label: 'Visits',
              data: [120, 150, 180, 200, 170, 190, 220, 250, 230, 280, 300, 320],
              borderColor: '#0F4D78',
              backgroundColor: 'rgba(15,77,120,0.08)',
              tension: 0.36,
              fill: true,
              pointRadius: 3
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              x: { grid: { color: 'rgba(217,230,239,0.6)' } },
              y: { beginAtZero: true, grid: { color: 'rgba(217,230,239,0.6)' } }
            }
          }
        });
      }

      const deptEl = document.getElementById('departmentChart');
      if (deptEl && deptEl.getContext) {
        const ctx2 = deptEl.getContext('2d');
        window._deptChart = new Chart(ctx2, {
          type: 'doughnut',
          data: {
            labels: ['Cardiology', 'Dermatology', 'Orthopedics', 'Neurology', 'Pediatrics'],
            datasets: [{
              data: [30, 25, 20, 15, 10],
              backgroundColor: ['#0F4D78', '#49779C', '#093656', '#6B9BC3', '#8BB5D1']
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: { legend: { position: 'bottom' } }
          }
        });
      }
    }
  </script>
</body>

</html>